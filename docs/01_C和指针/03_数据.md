# 数据

## 1. 基本数据类型

在C语言中仅有4类基本数据类型：
- 整型
- 浮点型
- 指针
- 聚合类型（如数组和结构等）

其他类型均由这4类组合派生而来。

### 🏳️‍🌈1.1 整型

- 整型家族包括：字符、短整型、整型和长整形，并分为有符号和无符号两个版本
- 综合上述，共9种不同类型：

字符 | 短整型 | 整型 | 长整形
--- | --- | --- | --- 
```char```, ```signed char```, ```unsigned char``` |```short int```, ```unsigned short int``` | ```int```, ```unsigned int``` | ```long int```, ```unsigned long int```
3 | 2 | 2 | 2

- ```signed```关键字一般只用于```char```，其他类型在缺省情况下都是有符号数
- 整型值相互间大小的规则：**长整形至少应该和整型一样长，而整型至少应该和短整型一样长**
- 在头文件```limits.h```中指明了不同整数类型的特点：位数、范围等，范围如下表：

类型 | signed最小值 | signed最大值 | unsigned最大值
--- | --- | --- | ---
字符 | SCHAR_MIN | SCHAR_MAX | UCHAR_MAX
短整型 | SHRT_MIN | SHRT_MAX | USHRT_MAX
整型 | INT_MIN | INT_MAX | UINT_MAX
长整型 | LONG_MIN | LONG_MAX | ULONG_MAX

#### 1.1.1 整型字面值

- 整型字面值是哪种类型取决于其书写方式，通常十进制使用为多，加```L```或```l```表示长整形，加```U```或```u```表示```unsigned```

十进制 | 八进制 | 十六进制
--- | --- | ---
```123``` | 以```0```开头 | 以```0x```开头

#### 1.1.2 字符常量

- 类型总是```int```，不能添加```unsigned```或```long```
- 使用单引号包围单个字符，如：```'M'```, ```'\n'```, ```'\377'```


#### 1.1.3 枚举类型

- 关键字```enum```

```c
// 枚举类型声明
enum Direction{ UP, DOWN};

// 枚举变量声明
Direction d1, d2;

// 上面也可以统一写为
enum Direction{ UP, DOWN} d1, d2;
```

- 枚举变量以整数形式存储，默认```UP=0```，也可以指定特定的整型值，其后没有指明的会依次递增，如```Thursday=21```...

```c
// 枚举类型声明
enum Direction{ Monday = 5, Tuesday = 7, Wednesday = 20, Thursday, Friday, Saturday, Sunday };
```

### 🏳️‍🌈1.2 浮点型

- 浮点数家族包括```float```，```double```，```long double```。
- 头文件```float.h```中定义了```FLT_MAX```，```DBL_MAX```和```LDBL_MAX```，对应```FLT_MIN```，```DBL_MIN```和```LDBL_MIN```
- 浮点数字面值默认为```double```，加```L```或```l```为```long double```，加```F```或```f```为```float```

### 🏳️‍🌈1.3 指针

- 指针变量存放内存地址的值
- 相当于房子的门牌号

## 2. typedef 和 define

- ```typedef```为各种数据类型定义新名字

```c
typedef char *ptr_to_char;

char *p;
// 等价于
ptr_to_char p;
```

- ```define```也可以定义新类型名，但是不能正确处理指针类型。如下：p被声明为指针```char *```，但是却被声明为字符```char```

```c
#define ptr_to_char char*
ptr_to_char p, q;
```



## 3. const

### 🏳️‍🌈3.1 修饰变量
- const修饰的变量为常量：
> 1. 变量需要在声明时初始化；
> 2. const类型的形参在函数调用时赋值

```c
int const a;
// 等价
const int a;
```

- 对于创建名字常量，使用```define```会比```const```更好。因为允许使用字面值常量的地方都可以使用前者，比如数组的长度；```const```只能用于使用变量的地方

```c
#define MAX 50
int a[MAX];

const int max = 50;
int a[max]; // 错误
```




### 🏳️‍🌈3.2 修饰指针
- 从右至左分析
- int * const p;
> p是一个指针常量，指向一个整型变量

- const int *p;
> p是一个指针变量，指向一个int常量

- const int * const p;
> p是一个指针常量，指向一个整型常量

## 4. 作用域、链接属性和存储类型

- 作用域：文件作用域，函数作用域，代码块作用域和原型作用域
- 链接属性：外部（external），内部（internal）和无（none）
> 1. ```external```指标识符不论声明多少次，位于几个源文件都表示同一个实体
> > - 函数和具有文件作用域的变量，链接属性为```external```
> 2. ```internal```指同一源文件中多有声明中都指向同一个实体
> > - ```static```关键字可以将```external```链接属性的变量转变为```internal```属性
> 3. ```none```指标识符的多个声明都被当做独立不同的实体
> > - 局部变量的链接属性为```none```
- 存储类型是指存储变量值的内存类型：普通内存，运行时堆栈和硬件寄存器
> ```register```关键字声明局部变量，提示编译器将变量存储与寄存器而非内存中，不过最终是否将其存放于寄存器又编译器决定

### 🏳️‍🌈4.1 extern

- 用于变量声明使用
- 为**局部**标识符指定```external```链接属性，这样就可以访问在其他任何位置定义的这个实体

### 🏳️‍🌈4.2 static

- 用于变量声明使用
- 作用：
> 1. 修饰具有```external```链接属性的声明，```static```可以使它的链接属性变为internal，上述转换包括全局变量和函数

```c
static int a; // 全局变量
static int f(int b); // 函数
```

> 2. 修饰局部变量，使其转变为静态变量，存放于静态存储区

### 🏳️‍🌈4.3 总结

变量类型 | 声明的位置 | 是否存于堆栈 | 作用域 | 链接属性 | 如果声明为static
---|---|---|---|---|---
全局 | 所有代码块之外 | 否 | 从声明处至文件尾 | external | 变为internal属性，不允许其他源文件访问
局部 | 代码块和函数内 | 是 | 代码块和函数内 | none | 变量不存储于堆栈中，它的值在整个执行期一直保持
形式参数 | 函数形参 | 是 | 整个函数内 | none | 不允许
















